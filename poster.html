<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Marketing Poster Generator (No-Backend)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        textarea::-webkit-scrollbar { width: 8px; }
        textarea::-webkit-scrollbar-track { background: #2d3748; }
        textarea::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-6">

    <canvas id="posterCanvas" width="800" height="800" class="hidden"></canvas>

    <div class="text-center mb-10">
        <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-2">
            Poster Generator (Client-Side)
        </h1>
        <p class="text-gray-400">Upload foto produk, tulis teks, dan generate poster langsung di browser!</p>
    </div>

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <div class="lg:col-span-5 space-y-6">
            
            <div class="bg-gray-800 p-5 rounded-2xl border border-gray-700">
                <label class="block text-sm font-medium text-gray-300 mb-3">1. Upload Product Image</label>
                <input type="file" id="imageInput" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
                <div onclick="document.getElementById('imageInput').click()" class="border-2 border-dashed border-gray-600 rounded-xl h-48 flex flex-col items-center justify-center bg-gray-700/50 cursor-pointer hover:border-purple-500 transition relative group overflow-hidden">
                    <img id="previewImage" src="" class="hidden h-full object-contain z-10">
                    <div id="uploadPlaceholder" class="text-center">
                        <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                        <p class="text-sm text-gray-400">Klik untuk upload</p>
                    </div>
                </div>
            </div>

            <div class="bg-gray-800 p-5 rounded-2xl border border-gray-700">
                <label class="block text-sm font-medium text-gray-300 mb-3">2. Add Marketing Text</label>
                <textarea id="textInput" class="w-full h-32 bg-gray-700/50 border border-gray-600 rounded-xl p-4 text-gray-200 focus:ring-2 focus:ring-purple-500 focus:outline-none resize-none" placeholder="Baris 1: Judul Besar&#10;Baris 2: Sub-judul&#10;Baris 3: Call to Action">Promo Spesial 2.2
Hanya 50rb
Beli Sekarang</textarea>
            </div>

            <div class="bg-gray-800 p-5 rounded-2xl border border-gray-700">
                <label class="block text-sm font-medium text-gray-300 mb-3">3. Choose Color Theme</label>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setTheme('purple')" class="theme-btn py-2 px-4 bg-purple-600/20 border border-purple-500 text-white rounded-lg text-xs font-bold hover:bg-purple-600">Electric Purple</button>
                    <button onclick="setTheme('orange')" class="theme-btn py-2 px-4 bg-gray-700 rounded-lg text-xs hover:bg-orange-600 transition">Fresh Orange</button>
                    <button onclick="setTheme('blue')" class="theme-btn py-2 px-4 bg-gray-700 rounded-lg text-xs hover:bg-blue-600 transition">Ocean Blue</button>
                    <button onclick="setTheme('red')" class="theme-btn py-2 px-4 bg-gray-700 rounded-lg text-xs hover:bg-red-600 transition">Sale Red</button>
                </div>
            </div>

            <button onclick="generatePosters()" class="w-full py-4 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 rounded-xl font-bold text-lg shadow-lg hover:shadow-purple-500/50 hover:scale-[1.02] transition transform flex items-center justify-center gap-2">
                <i class="fa-solid fa-wand-magic-sparkles"></i> Generate Poster
            </button>
        </div>

        <div class="lg:col-span-7 bg-gray-800/50 p-6 rounded-3xl border border-gray-700 flex flex-col">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-lg font-medium text-gray-300">4. Generated Result</h2>
            </div>

            <div class="flex-1 flex items-center justify-center bg-gray-900 rounded-xl border border-gray-700 p-4 relative">
                <img id="finalResult" src="https://via.placeholder.com/800x800?text=Preview+Poster" class="max-h-[500px] rounded shadow-2xl">
                <a id="downloadLink" href="#" download="poster.png" class="absolute bottom-4 right-4 bg-white text-black px-4 py-2 rounded-lg font-bold shadow-lg hover:bg-gray-200 hidden">
                    <i class="fas fa-download mr-2"></i> Download
                </a>
            </div>
        </div>
    </div>

    <script>
        let uploadedImage = null;
        let currentTheme = 'purple';

        // Themes Configuration (Background Gradients)
        const themes = {
            'purple': ['#240b36', '#c31432'],
            'orange': ['#ff4b1f', '#ff9068'],
            'blue':   ['#2193b0', '#6dd5ed'],
            'red':    ['#D31027', '#EA384D']
        };

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Show preview in upload box
                    const img = document.getElementById('previewImage');
                    img.src = e.target.result;
                    img.classList.remove('hidden');
                    document.getElementById('uploadPlaceholder').classList.add('hidden');
                    
                    // Save for canvas use
                    uploadedImage = new Image();
                    uploadedImage.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        }

        function setTheme(theme) {
            currentTheme = theme;
            // Update UI buttons (simple toggle logic)
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.className = 'theme-btn py-2 px-4 bg-gray-700 rounded-lg text-xs hover:bg-gray-600 transition';
            });
            event.target.className = `theme-btn py-2 px-4 bg-${theme === 'orange' ? 'orange' : theme === 'red' ? 'red' : theme === 'blue' ? 'blue' : 'purple'}-600 border border-white text-white rounded-lg text-xs font-bold`;
        }

        function generatePosters() {
            if (!uploadedImage) {
                alert("Silakan upload foto produk terlebih dahulu!");
                return;
            }

            const canvas = document.getElementById('posterCanvas');
            const ctx = canvas.getContext('2d');
            const text = document.getElementById('textInput').value.split('\n');
            
            // 1. Draw Background (Gradient)
            const gradient = ctx.createLinearGradient(0, 0, 800, 800);
            gradient.addColorStop(0, themes[currentTheme][0]);
            gradient.addColorStop(1, themes[currentTheme][1]);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 800);

            // 2. Draw Abstract Shapes (To make it look modern)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.beginPath();
            ctx.arc(700, 100, 150, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(100, 700, 200, 0, 2 * Math.PI);
            ctx.fill();

            // 3. Draw Product Image (Center)
            // Aspect ratio calculation to fit image nicely
            const scale = Math.min(400 / uploadedImage.width, 400 / uploadedImage.height);
            const w = uploadedImage.width * scale;
            const h = uploadedImage.height * scale;
            const x = (800 - w) / 2;
            const y = (800 - h) / 2;
            
            // Add shadow to product
            ctx.shadowColor = "rgba(0,0,0,0.5)";
            ctx.shadowBlur = 20;
            ctx.shadowOffsetX = 10;
            ctx.shadowOffsetY = 10;
            
            ctx.drawImage(uploadedImage, x, y, w, h);
            
            // Reset shadow
            ctx.shadowColor = "transparent";

            // 4. Draw Text Overlay
            ctx.textAlign = 'center';
            ctx.fillStyle = 'white';
            
            // Line 1 (Headline)
            if(text[0]) {
                ctx.font = '900 60px Inter, sans-serif';
                ctx.shadowColor = "rgba(0,0,0,0.3)"; // Text shadow
                ctx.shadowBlur = 10;
                ctx.fillText(text[0].toUpperCase(), 400, 150);
            }

            // Line 2 (Subheadline)
            if(text[1]) {
                ctx.font = '700 40px Inter, sans-serif';
                ctx.fillStyle = '#fbbf24'; // Gold color
                ctx.fillText(text[1], 400, 650);
            }

            // Line 3 (Button-like CTA)
            if(text[2]) {
                // Draw pill shape button
                ctx.fillStyle = 'white';
                ctx.shadowBlur = 0;
                roundRect(ctx, 250, 700, 300, 60, 30);
                ctx.fill();
                
                ctx.fillStyle = themes[currentTheme][0]; // Text color same as theme dark
                ctx.font = 'bold 24px Inter, sans-serif';
                ctx.fillText(text[2].toUpperCase(), 400, 740);
            }

            // 5. Export to Image
            const dataURL = canvas.toDataURL('image/png');
            const finalImg = document.getElementById('finalResult');
            finalImg.src = dataURL;
            
            // Setup Download Link
            const dlLink = document.getElementById('downloadLink');
            dlLink.href = dataURL;
            dlLink.classList.remove('hidden');
        }

        // Helper function for rounded rectangle
        function roundRect(ctx, x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.arcTo(x + w, y, x + w, y + h, r);
            ctx.arcTo(x + w, y + h, x, y + h, r);
            ctx.arcTo(x, y + h, x, y, r);
            ctx.arcTo(x, y, x + w, y, r);
            ctx.closePath();
        }
    </script>
</body>
</html>
